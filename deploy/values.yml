replicaCount: 2
service:
  enabled: true
  name: ${APP_NAME}

  port: ${PORT}
  type: ClusterIP
  containerPort: ${PORT}
  tls:
    enabled: true
    issuerName: cloudflare

image:
  repository: ${ECR_REGISTRY}/${ECR_REPO_NAME}
  tag: ${IMAGE_TAG}
  pullPolicy: Always

serviceAccount:
  create: false

ingress:
  enabled: true
  hosts:
    - ${ENDPOINT}
  annotations:
    external-dns.alpha.kubernetes.io/cloudflare-proxied: "true"

httpBasicAuth:
  enabled: false

# If enabled will create Traefik Middleware and apply to Ingress
# to redirect http to https and www to non-www
httpWwwRedirect:
  enabled: false

podAnnotations:
  reloader.stakater.com/auto: "true"

resources:
  limits:
    cpu: 1.5
    memory: 1536Mi
  requests:
    cpu: 1000m
    memory: 256Mi

externalSecrets:
  clusterSecretStoreName: ${CLUSTER_NAME}

livenessProbe:
  httpGet:
    path: /healthz
    port: ${PORT}
  initialDelaySeconds: 5
  periodSeconds: 30
readinessProbe:
  httpGet:
    path: /readiness
    port: ${PORT}
  initialDelaySeconds: 5
  periodSeconds: 30

#labels:
#  app: ${APP_NAME}
#selectorLabels:
#  app: ${APP_NAME}
#
#deployment:
#  enabled: true
#  ports:
#    - containerPort: ${PORT}
#      name: http
#      protocol: TCP

autoscaling:
  enabled: false
  #minReplicas: 1
  #maxReplicas: 3
  #targetCPUUtilizationPercentage: 75
  #targetMemoryUtilizationPercentage: 75
